language: c

os:
  - osx

jobs:
  include:
    - os: osx
      osx_image: xcode11
    - os: osx
      osx_image: xcode8

addons:
  homebrew:
    packages:
    - pyenv
    - openssl

before_install: 
  - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then CFLAGS="-I$(brew --prefix openssl)/include" LDFLAGS="-L$(brew --prefix openssl)/lib" pyenv install 3.5.0 && pyenv global 3.5.0; fi

script: |
  pip install --upgrade --requirement tests/requirements.txt
  pytest --capture=no --verbose tests
