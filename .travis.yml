language: c

os:
  - osx

jobs:
  include:
    - os: osx
      osx_image: xcode11
    - os: osx
      osx_image: xcode8

addons:
  homebrew:
    packages:
    - pyenv
    - openssl@1.1

before_install:
  - CONFIGURE_OPTS="--with-openssl=$(brew --prefix openssl@1.1)" pyenv install 3.7.0
  - pyenv global 3.7.0
  - which python
  - python -V
  - pip -V

script:
  - pyenv local 3.7.0
  - python -V
  - pip -V
  - pip install --upgrade --requirement tests/requirements.txt
  - pytest --capture=no --verbose tests
